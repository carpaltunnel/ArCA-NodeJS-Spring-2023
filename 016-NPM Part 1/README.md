# NPM (Node Package Manager)
[NPM](https://www.npmjs.com/) allows you to create standardized projects, manage third party modules, and create/publish your own modules for others to use.  The core of an NPM based project is the `package.json` that defines the name, version, author, dependencies, tasks, and other relevant project information.  NPM is installed by default when you install Node.js.

## Initialize a NPM Project
To create a new NPM project, create your source directory, `cd` into it, and execute `npm init`.  The initialization script will interactively ask for information about your new project, though all of it is optional.  You should at least choose a relevant package name.  The "entry point" is the script that will execute by default.  A very common convention is to use `index.js` as your entry point, though it is not required.  Out of habit, I usually initialize my NPM project before I create my Git repository so I leave the "git repository" setting blank during the init process.  Once you complete the init process, a basic `package.json` will be created it from the information you provided.

## Installing Third Party Modules
To automatically pull and install a module with NPM you need to know the package name.  Many common ones like `lodash` are obvious, but you should always confirm you're choosing the correct package and spelling the name exactly correct.  Since NPM is a community populated repository, anyone can submit modules.  A common, low effort, attack vector for bad actors is to create malicious packages that are similarly named to real packages and hope you typo the name.  For example, `lodasj` could be an attempt to capitalize on a typo of the word `lodash`.  NPM community members do keep an eye out for these things but it's always possible they can be missed.  So, be vigilant.

To install a module, execute `npm install <package-name>` or `npm install lodash` as an example.  In the past you had to supply the `--save` parameter to save the dependency to your `package.json` but this is now automatic.  After running the install, the latest version of `lodash` will appear in your package.json under the `dependencies` section.  A new folder will also be created in your project directory named `node_modules`.  This is where all the packages (and their dependencies) will be installed to by default.  While you normally won't bother looking in `node_modules`, if you need to debug how a third party module works with your code you might need to dive in and look around.  It's sorted into folders based on package name.

You can also use the `--save-dev` flag with `npm install` to reference a package but only use it for development/build purposes.  A common use case for this is for testing libraries where you need them to run your unit tests and build, but you wouldn't need them included in your project for a deployment.  When using `npm install --save-dev <package>`, the dependency will be added to the `devDependencies` object of your `package.json`.

You can also install a NPM module globally for your entire system, though somewhat uncommon.  To do this, use the `-g` flag to indicate "global" like `npm install -g grunt`.  You might need admin/root privileges to do this, depending on how Node.js was installed.

## Dependency Versions
When you installed lodash, you may have noticed that it defaulted to the most recent version with a special notation like `^4.17.21`.  The carat in this context indicates that you will accept any version update that does not change the leftmost non-zero number.  So, `^4.17.21` dictates that you would be okay with an update to 4.18 or 4.19, but not to 5.0.  The carat notation is the most common but there are several other update rules you can use if needed :

1. ^ : Accept any version update that does not change the leftmost non-zero number.
2. ~ : Accept only "patch" updates (1.1.*)
3. > : Accept any version higher than the one specified
4. >= : Accept any version equal to or higher than the one specified
5. <= : Accept any version equal or lower to the one specified
6. < : Accept any version lower than the one specified
7. = : Accept the exact version and nothing else
8. - : Accept a range of versions. Example: 1.1.0 - 1.5.5
9. || : Accept a combination of sets (logical OR). Example: < 1.0 || > 1.5

## Updating Dependencies
If your package.json defines the version updates you're willing to accept, as shown above, you can simply execute `npm update` to update your dependencies.


## Package Lock
`package-lock.json` is automatically generated by NPM whenever node_modules or package.json are changed.  It documents the exact versions of all dependencies (and their dependencies) that were installed so subsequent builds by other users can be exactly the same.  You should commit package.json and package-lock.json to your Git repo but you should never commit the node_modules folder.  The node_modules folder can be huge and is needless overhead since you can (hopefully) always install the packages from NPM.

## Git Dependencies
We've talked about referencing publicly available packages from NPM, but what if you have a proprietary package that is only hosted privately?  In that scenario you can add a dependency to the package.json that specifies a HTTP link to a Git repo.  Usually you'll want to reference a specific tag, or possibly a specific branch.  To do that, specify your dependency like this : 
`"my-package": "git+https://my-git-repo.mydomain.com/projects/my-package#v1.1"` 
where `v1.1` is your tag or branch name and the URL specifies your Git repository.
